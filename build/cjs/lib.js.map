{"version":3,"file":"lib.js","sources":["../../src/api/legendSets.js","../../src/api/analytics.js","../../src/modules/options.js","../../src/modules/analytics.js","../../src/ChartPlugin.js","../../src/PivotPlugin.js","../../src/index.js"],"sourcesContent":["const legendSetQuery = {\n    legendSet: {\n        resource: 'legendSets',\n        id: ({ id }) => id,\n    },\n}\n\nexport const apiFetchLegendSet = (dataEngine, id) =>\n    dataEngine.query(legendSetQuery, { variables: { id } })\n","const peId = 'pe'\n\nexport const apiFetchAnalytics = async (d2, current, options) => {\n    const req = new d2.analytics.request()\n        .fromModel(current)\n        .withParameters(options)\n\n    const rawResponse = await d2.analytics.aggregate.get(req)\n\n    return [new d2.analytics.response(rawResponse)]\n}\n\nexport const apiFetchAnalyticsForYearOverYear = async (\n    d2,\n    current,\n    options\n) => {\n    let yearlySeriesReq = new d2.analytics.request()\n        .addPeriodDimension(current.yearlySeries)\n        .withSkipData(true)\n        .withSkipMeta(false)\n        .withIncludeMetadataDetails(true)\n\n    if (options.relativePeriodDate) {\n        yearlySeriesReq = yearlySeriesReq.withRelativePeriodDate(\n            options.relativePeriodDate\n        )\n    }\n\n    const yearlySeriesRes = await d2.analytics.aggregate.fetch(yearlySeriesReq)\n\n    const requests = []\n    const yearlySeriesLabels = []\n\n    const now = new Date()\n    const currentDay = ('' + now.getDate()).padStart(2, 0)\n    const currentMonth = ('' + (now.getMonth() + 1)).padStart(2, 0)\n\n    yearlySeriesRes.metaData.dimensions[peId].forEach(period => {\n        yearlySeriesLabels.push(yearlySeriesRes.metaData.items[period].name)\n\n        const startDate = `${period}-${currentMonth}-${currentDay}`\n\n        const req = new d2.analytics.request()\n            .fromModel(current)\n            .withParameters(options)\n            .withRelativePeriodDate(startDate)\n\n        requests.push(d2.analytics.aggregate.get(req))\n    })\n\n    return Promise.all(requests).then(responses => ({\n        responses: responses.map(res => new d2.analytics.response(res)),\n        yearlySeriesLabels,\n    }))\n}\n","import pick from 'lodash-es/pick'\n\nexport const options = {\n    baseLineLabel: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    baseLineValue: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    // colorSet:\n    cumulativeValues: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    domainAxisLabel: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    hideEmptyRowItems: {\n        defaultValue: 'NONE',\n        requestable: false,\n        savable: true,\n    },\n    hideLegend: { defaultValue: false, requestable: false, savable: true },\n    noSpaceBetweenColumns: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    percentStackedValues: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisDecimals: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisLabel: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisMaxValue: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisMinValue: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    rangeAxisSteps: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    regressionType: { defaultValue: 'NONE', requestable: false, savable: true },\n    showData: { defaultValue: true, requestable: false, savable: true },\n    targetLineLabel: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    targetLineValue: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    aggregationType: {\n        defaultValue: 'DEFAULT',\n        requestable: true,\n        savable: true,\n    },\n    completedOnly: { defaultValue: false, requestable: true, savable: true },\n    hideSubtitle: { defaultValue: false, requestable: false, savable: true },\n    hideTitle: { defaultValue: false, requestable: false, savable: true },\n    sortOrder: { defaultValue: '0', requestable: false, savable: true },\n    subtitle: { defaultValue: undefined, requestable: false, savable: true },\n    title: { defaultValue: undefined, requestable: false, savable: true },\n\n    // only for PT XXX\n    colTotals: { defaultValue: false, requestable: false, savable: true },\n    colSubTotals: { defaultValue: false, requestable: false, savable: true },\n    rowTotals: { defaultValue: false, requestable: false, savable: true },\n    rowSubTotals: { defaultValue: false, requestable: false, savable: true },\n    showDimensionLabels: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    hideEmptyColumns: { defaultValue: false, requestable: true, savable: true },\n    hideEmptyRows: { defaultValue: false, requestable: true, savable: true },\n    skipRounding: { defaultValue: false, requestable: true, savable: true },\n    numberType: { defaultValue: 'VALUE', requestable: false, savable: true },\n    showHierarchy: { defaultValue: false, requestable: true, savable: true },\n    legendSet: { defaultValue: undefined, requestable: false, savable: true },\n    legendDisplayStrategy: {\n        defaultValue: undefined,\n        requestable: false,\n        savable: true,\n    },\n    legendDisplayStyle: {\n        defaultValue: 'FILL',\n        requestable: false,\n        savable: true,\n    },\n    displayDensity: {\n        defaultValue: 'NORMAL',\n        requestable: false,\n        savable: true,\n    },\n    fontSize: { defaultValue: 'NORMAL', requestable: false, savable: true },\n    digitGroupSeparator: {\n        defaultValue: 'SPACE',\n        requestable: false,\n        savable: true,\n    },\n    approvalLevel: {\n        defaultValue: undefined,\n        requestable: true,\n        savable: false,\n    },\n\n    // these are stored in the AO under reportingParams\n    reportingPeriod: { defaultValue: false, requestable: false, savable: true },\n    organisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    parentOrganisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    // not exposed in UI\n    grandParentOrganisationUnit: {\n        defaultValue: false,\n        requestable: false,\n        savable: true,\n    },\n    regression: { defaultValue: false, requestable: false, savable: true },\n    cumulative: { defaultValue: false, requestable: false, savable: true },\n    measureCriteria: {\n        defaultValue: undefined,\n        requestable: true,\n        savable: true,\n    },\n    topLimit: { defaultValue: '0', requestable: false, savable: true },\n}\n\nexport const computedOptions = {\n    baseLine: { defaultValue: false, requestable: false, savable: false },\n    targetLine: { defaultValue: false, requestable: false, savable: false },\n    axisRange: { defaultValue: undefined, requestable: false, savable: false },\n}\n\nexport default options\n\nexport const getOptionsForUi = () => {\n    return Object.entries({ ...options, ...computedOptions }).reduce(\n        (map, [option, props]) => {\n            map[option] = props.defaultValue\n\n            return map\n        },\n        {}\n    )\n}\n\nexport const getOptionsForRequest = () => {\n    return Object.entries(options).filter(\n        entry => entry[1].requestable // entry = [option, props]\n    )\n}\n\nconst isNotDefault = (optionsFromVisualization, prop) => {\n    return Boolean(\n        optionsFromVisualization[prop] &&\n            optionsFromVisualization[prop] !== options[prop].defaultValue\n    )\n}\n\nexport const getOptionsFromVisualization = visualization => {\n    const optionsFromVisualization = {\n        ...getOptionsForUi(),\n        ...pick(visualization, Object.keys(options)),\n    }\n\n    optionsFromVisualization.baseLine =\n        isNotDefault(optionsFromVisualization, 'baseLineLabel') ||\n        isNotDefault(optionsFromVisualization, 'baseLineValue')\n\n    optionsFromVisualization.targetLine =\n        isNotDefault(optionsFromVisualization, 'targetLineLabel') ||\n        isNotDefault(optionsFromVisualization, 'targetLineValue')\n\n    // nested options under reportingParams\n    if (visualization.reportingParams) {\n        optionsFromVisualization.organisationUnit =\n            visualization.reportingParams.organisationUnit\n        optionsFromVisualization.reportingPeriod =\n            visualization.reportingParams.reportingPeriod\n        optionsFromVisualization.parentOrganisationUnit =\n            visualization.reportingParams.parentOrganisationUnit\n        optionsFromVisualization.grandParentOrganisationUnit =\n            visualization.reportingParams.grandParentOrganisationUnit\n    }\n\n    // cast option values from Number for some options\n    ;['baseLineValue', 'targetLineValue', 'sortOrder', 'topLimit'].forEach(\n        option => {\n            if (Object.prototype.hasOwnProperty.call(visualization, option)) {\n                optionsFromVisualization[option] = String(visualization[option])\n            }\n        }\n    )\n\n    return optionsFromVisualization\n}\n","export const computeGenericPeriodNames = responses => {\n    const xAxisRes = responses.reduce((out, res) => {\n        if (out.metaData) {\n            if (\n                res.metaData.dimensions.pe.length >\n                out.metaData.dimensions.pe.length\n            ) {\n                out = res\n            }\n        } else {\n            out = res\n        }\n\n        return out\n    }, {})\n\n    const metadata = xAxisRes.metaData\n\n    return metadata.dimensions.pe.reduce((genericPeriodNames, periodId) => {\n        const name = metadata.items[periodId].name\n\n        // until the day the backend will support this in the API:\n        // trim off the trailing year in the period name\n        // english names should all have the year at the end of the string\n        genericPeriodNames.push(name.replace(/\\s+\\d{4}$/, ''))\n\n        return genericPeriodNames\n    }, [])\n}\n","import React, { useRef, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport {\n    isYearOverYear,\n    isSingleValue,\n    createVisualization,\n} from '@dhis2/analytics'\n\nimport {\n    apiFetchAnalytics,\n    apiFetchAnalyticsForYearOverYear,\n} from './api/analytics'\nimport { getOptionsForRequest } from './modules/options'\nimport { computeGenericPeriodNames } from './modules/analytics'\n\nconst getRequestOptions = (visualization, filters) => {\n    const options = getOptionsForRequest().reduce((map, [option, props]) => {\n        // only add parameter if value !== default\n        if (\n            visualization[option] !== undefined &&\n            visualization[option] !== props.defaultValue\n        ) {\n            map[option] = visualization[option]\n        }\n\n        return map\n    }, {})\n\n    // interpretation filter\n    if (filters.relativePeriodDate) {\n        options.relativePeriodDate = filters.relativePeriodDate\n    }\n\n    // global filters\n    // userOrgUnit\n    if (filters.userOrgUnit && filters.userOrgUnit.length) {\n        const ouIds = filters.userOrgUnit.map(\n            ouPath => ouPath.split('/').slice(-1)[0]\n        )\n\n        options.userOrgUnit = ouIds.join(';')\n    }\n\n    return options\n}\n\nconst fetchData = async ({ visualization, filters, d2, forDashboard }) => {\n    const options = getRequestOptions(visualization, filters)\n\n    const extraOptions = {\n        dashboard: forDashboard,\n        noData: { text: i18n.t('No data') },\n    }\n\n    if (isYearOverYear(visualization.type)) {\n        const {\n            responses,\n            yearlySeriesLabels,\n        } = await apiFetchAnalyticsForYearOverYear(d2, visualization, options)\n\n        return {\n            responses,\n            extraOptions: {\n                ...extraOptions,\n                yearlySeries: yearlySeriesLabels,\n                xAxisLabels: computeGenericPeriodNames(responses),\n            },\n        }\n    }\n\n    const responses = await apiFetchAnalytics(d2, visualization, options)\n\n    return {\n        responses,\n        extraOptions,\n    }\n}\n\nconst ChartPlugin = ({\n    visualization,\n    filters,\n    id,\n    style,\n    d2,\n    forDashboard,\n    onResponsesReceived,\n    onChartGenerated,\n    onError,\n    onLoadingComplete,\n    animation: defaultAnimation,\n}) => {\n    const canvasRef = useRef(undefined)\n    const fetchResult = useRef(undefined)\n\n    const renderVisualization = useCallback(\n        animation => {\n            if (!fetchResult.current) return\n            const { responses, extraOptions } = fetchResult.current\n\n            const visualizationConfig = createVisualization(\n                responses,\n                visualization,\n                canvasRef.current,\n                {\n                    ...extraOptions,\n                    animation,\n                },\n                undefined,\n                undefined,\n                isSingleValue(visualization.type) ? 'dhis' : 'highcharts' // output format\n            )\n\n            if (isSingleValue(visualization.type)) {\n                onChartGenerated(visualizationConfig.visualization)\n            } else {\n                onChartGenerated(\n                    visualizationConfig.visualization.getSVGForExport({\n                        sourceHeight: 768,\n                        sourceWidth: 1024,\n                    })\n                )\n            }\n        },\n        [canvasRef, visualization, onChartGenerated]\n    )\n\n    const doFetch = useCallback(\n        (visualization, filters, forDashboard) => {\n            fetchData({\n                visualization,\n                filters,\n                d2,\n                forDashboard,\n            })\n                .then(result => {\n                    if (result.responses.length) {\n                        onResponsesReceived(result.responses)\n                    }\n\n                    fetchResult.current = result\n                    renderVisualization(defaultAnimation)\n                    onLoadingComplete()\n                })\n                .catch(error => {\n                    onError(error)\n                })\n        },\n        [\n            d2,\n            onResponsesReceived,\n            onLoadingComplete,\n            onError,\n            renderVisualization,\n            defaultAnimation,\n        ]\n    )\n\n    useEffect(() => {\n        doFetch(visualization, filters, forDashboard)\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [visualization, filters, forDashboard])\n\n    useEffect(() => {\n        renderVisualization(0)\n    }, [id, style]) /* eslint-disable-line react-hooks/exhaustive-deps */\n\n    return <div ref={canvasRef} style={style} />\n}\n\nChartPlugin.defaultProps = {\n    visualization: {},\n    filters: {},\n    forDashboard: false,\n    style: {},\n    animation: 200,\n    onError: Function.prototype,\n    onChartGenerated: Function.prototype,\n    onLoadingComplete: Function.prototype,\n    onResponsesReceived: Function.prototype,\n}\n\nChartPlugin.propTypes = {\n    d2: PropTypes.object.isRequired,\n    visualization: PropTypes.object.isRequired,\n    onError: PropTypes.func.isRequired,\n    animation: PropTypes.number,\n    filters: PropTypes.object,\n    forDashboard: PropTypes.bool,\n    id: PropTypes.number,\n    style: PropTypes.object,\n    onChartGenerated: PropTypes.func,\n    onLoadingComplete: PropTypes.func,\n    onResponsesReceived: PropTypes.func,\n}\n\nexport default ChartPlugin\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { apiFetchAnalytics } from './api/analytics'\nimport { getOptionsForRequest } from './modules/options'\n\nimport { PivotTable } from '@dhis2/analytics'\n\nconst getRequestOptions = (visualization, filters) => {\n    const options = getOptionsForRequest().reduce((map, [option, props]) => {\n        // only add parameter if value !== default\n        if (\n            visualization[option] !== undefined &&\n            visualization[option] !== props.defaultValue\n        ) {\n            map[option] = visualization[option]\n        }\n\n        return map\n    }, {})\n\n    // interpretation filter\n    if (filters.relativePeriodDate) {\n        options.relativePeriodDate = filters.relativePeriodDate\n    }\n\n    // global filters\n    // userOrgUnit\n    if (filters.userOrgUnit && filters.userOrgUnit.length) {\n        const ouIds = filters.userOrgUnit.map(\n            ouPath => ouPath.split('/').slice(-1)[0]\n        )\n\n        options.userOrgUnit = ouIds.join(';')\n    }\n\n    return options\n}\n\nconst PivotPlugin = ({\n    visualization,\n    filters,\n    style,\n    onError,\n    onResponsesReceived,\n    d2,\n    onLoadingComplete,\n}) => {\n    const [data, setData] = useState(null)\n\n    useEffect(() => {\n        const options = getRequestOptions(visualization, filters)\n        apiFetchAnalytics(d2, visualization, options)\n            .then(responses => {\n                if (!responses.length) {\n                    return\n                }\n                if (onResponsesReceived) {\n                    onResponsesReceived(responses)\n                }\n                setData(responses[0].response)\n                onLoadingComplete()\n            })\n            .catch(error => {\n                onError(error)\n            })\n\n        // TODO: cancellation\n    }, [\n        visualization,\n        filters,\n        onResponsesReceived,\n        onError,\n        d2,\n        onLoadingComplete,\n    ])\n\n    return (\n        <div style={{ width: '100%', height: '100%', ...style }}>\n            {!data ? null : (\n                <PivotTable visualization={visualization} data={data} />\n            )}\n        </div>\n    )\n}\n\nPivotPlugin.defaultProps = {\n    visualization: {},\n    filters: {},\n    style: {},\n    onError: Function.prototype,\n    onLoadingComplete: Function.prototype,\n    onResponsesReceived: Function.prototype,\n}\n\nPivotPlugin.propTypes = {\n    d2: PropTypes.object.isRequired,\n    visualization: PropTypes.object.isRequired,\n    onError: PropTypes.func.isRequired,\n    filters: PropTypes.object,\n    style: PropTypes.object,\n    onLoadingComplete: PropTypes.func,\n    onResponsesReceived: PropTypes.func,\n}\n\nexport default PivotPlugin\n","import React, { useEffect, useState } from 'react'\nimport { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics'\nimport { useDataEngine } from '@dhis2/app-runtime'\n\nimport { apiFetchLegendSet } from './api/legendSets'\nimport ChartPlugin from './ChartPlugin'\nimport PivotPlugin from './PivotPlugin'\n\nconst VisualizationPlugin = props => {\n    const engine = useDataEngine()\n    const [legendSet, setLegendSet] = useState(null)\n\n    const hasLegendSet =\n        props.visualization.legendSet && props.visualization.legendSet.id\n\n    useEffect(() => {\n        const fetchLegendSet = async engine => {\n            if (\n                props.visualization.legendSet &&\n                props.visualization.legendSet.id\n            ) {\n                const response = await apiFetchLegendSet(\n                    engine,\n                    props.visualization.legendSet.id\n                )\n\n                if (response && response.legendSet) {\n                    setLegendSet(response.legendSet)\n                }\n            }\n        }\n\n        fetchLegendSet(engine)\n    }, [engine, props.visualization.legendSet])\n\n    if (hasLegendSet && !legendSet) {\n        // Until one of the children is rendered and calls onLoadingComplete,\n        // the app will continue to render the loading spinner\n        return null\n    }\n\n    if (\n        !props.visualization.type ||\n        props.visualization.type === VIS_TYPE_PIVOT_TABLE\n    ) {\n        return <PivotPlugin {...props} legendSet={legendSet} />\n    } else {\n        return <ChartPlugin {...props} legendSet={legendSet} />\n    }\n}\n\nexport default VisualizationPlugin\n"],"names":["legendSetQuery","legendSet","resource","id","apiFetchLegendSet","dataEngine","query","variables","peId","apiFetchAnalytics","d2","current","options","req","analytics","request","fromModel","withParameters","aggregate","get","rawResponse","response","apiFetchAnalyticsForYearOverYear","yearlySeriesReq","addPeriodDimension","yearlySeries","withSkipData","withSkipMeta","withIncludeMetadataDetails","relativePeriodDate","withRelativePeriodDate","fetch","yearlySeriesRes","requests","yearlySeriesLabels","now","Date","currentDay","getDate","padStart","currentMonth","getMonth","metaData","dimensions","forEach","period","push","items","name","startDate","Promise","all","then","responses","map","res","baseLineLabel","defaultValue","undefined","requestable","savable","baseLineValue","cumulativeValues","domainAxisLabel","hideEmptyRowItems","hideLegend","noSpaceBetweenColumns","percentStackedValues","rangeAxisDecimals","rangeAxisLabel","rangeAxisMaxValue","rangeAxisMinValue","rangeAxisSteps","regressionType","showData","targetLineLabel","targetLineValue","aggregationType","completedOnly","hideSubtitle","hideTitle","sortOrder","subtitle","title","colTotals","colSubTotals","rowTotals","rowSubTotals","showDimensionLabels","hideEmptyColumns","hideEmptyRows","skipRounding","numberType","showHierarchy","legendDisplayStrategy","legendDisplayStyle","displayDensity","fontSize","digitGroupSeparator","approvalLevel","reportingPeriod","organisationUnit","parentOrganisationUnit","grandParentOrganisationUnit","regression","cumulative","measureCriteria","topLimit","getOptionsForRequest","Object","entries","filter","entry","computeGenericPeriodNames","xAxisRes","reduce","out","pe","length","metadata","genericPeriodNames","periodId","replace","getRequestOptions","visualization","filters","option","props","userOrgUnit","ouIds","ouPath","split","slice","join","fetchData","forDashboard","extraOptions","dashboard","noData","text","i18n","t","isYearOverYear","type","xAxisLabels","ChartPlugin","style","onResponsesReceived","onChartGenerated","onError","onLoadingComplete","defaultAnimation","animation","canvasRef","useRef","fetchResult","renderVisualization","useCallback","visualizationConfig","createVisualization","isSingleValue","getSVGForExport","sourceHeight","sourceWidth","doFetch","result","catch","error","useEffect","React","defaultProps","Function","prototype","propTypes","PropTypes","object","isRequired","func","number","bool","PivotPlugin","useState","data","setData","width","height","PivotTable","VisualizationPlugin","engine","useDataEngine","setLegendSet","hasLegendSet","fetchLegendSet","VIS_TYPE_PIVOT_TABLE"],"mappings":"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"}