{"version":3,"file":"lib.js","sources":["../../src/modules/fields/baseFields.js","../../src/modules/fields/nestedFields.js","../../src/modules/fields/index.js","../../src/api/visualization.js","../../src/api/analytics.js","../../src/modules/options.js","../../src/modules/analytics.js","../../src/widgets/LoadingMask.js","../../src/ChartPlugin.js","../../src/PivotPlugin.js","../../src/index.js"],"sourcesContent":["export const BASE_FIELD_NAME = 'name';\nexport const BASE_FIELD_TYPE = 'type';\nexport const BASE_FIELD_YEARLY_SERIES = 'yearlySeries';\n\nconst getFieldObject = (name, props = {}) => ({\n    [BASE_FIELD_NAME]: name,\n    ...props,\n});\n\n// fields by type\n\nexport const fieldsByType = {\n    reportTable: [\n        getFieldObject('cumulative', { option: true }),\n        getFieldObject('hideEmptyColumns', { option: true }),\n        getFieldObject('legendDisplayStyle', { option: true }),\n        getFieldObject('measureCriteria', { option: true }),\n        getFieldObject('numberType', { option: true }),\n        getFieldObject('regression', { option: true }),\n        getFieldObject('reportParams', { option: true }),\n        getFieldObject('skipRounding', { option: true }),\n    ],\n    chart: [\n        getFieldObject('category', { excluded: true }),\n        getFieldObject('series', { excluded: true }),\n        getFieldObject(BASE_FIELD_YEARLY_SERIES),\n    ],\n    eventReport: [getFieldObject('dataType')],\n    reportTable_eventReport: [\n        getFieldObject('colSubTotals', { option: true }),\n        getFieldObject('colTotals', { option: true }),\n        getFieldObject('displayDensity', { option: true }),\n        getFieldObject('fontSize', { option: true }),\n        getFieldObject('hideEmptyRows', { option: true }),\n        getFieldObject('rowSubTotals', { option: true }),\n        getFieldObject('rowTotals', { option: true }),\n        getFieldObject('showDimensionLabels', { option: true }),\n        getFieldObject('showHierarchy', { option: true }),\n    ],\n    chart_eventChart: [\n        getFieldObject('baseLineLabel', { option: true }),\n        getFieldObject('baseLineValue', { option: true }),\n        getFieldObject('colorSet', { option: true }),\n        getFieldObject('cumulativeValues', { option: true }),\n        getFieldObject('domainAxisLabel', { option: true }),\n        getFieldObject('hideEmptyRowItems', { option: true }),\n        getFieldObject('hideLegend', { option: true }),\n        getFieldObject('noSpaceBetweenColumns', { option: true }),\n        getFieldObject('percentStackedValues', { option: true }),\n        getFieldObject('rangeAxisDecimals', { option: true }),\n        getFieldObject('rangeAxisLabel', { option: true }),\n        getFieldObject('rangeAxisMaxValue', { option: true }),\n        getFieldObject('rangeAxisMinValue', { option: true }),\n        getFieldObject('rangeAxisSteps', { option: true }),\n        getFieldObject('regressionType', { option: true }),\n        getFieldObject('showData', { option: true }),\n        getFieldObject('targetLineLabel', { option: true }),\n        getFieldObject('targetLineValue', { option: true }),\n        getFieldObject(BASE_FIELD_TYPE, { option: true }),\n    ],\n    eventReport_eventChart: [\n        getFieldObject('attributeValueDimension'),\n        getFieldObject('collapseDataDimensions'),\n        getFieldObject('dataElementValueDimension'),\n        getFieldObject('endDate'),\n        getFieldObject('eventStatus', { option: true }),\n        getFieldObject('hideNaData', { option: true }),\n        getFieldObject('outputType', { option: true }),\n        getFieldObject('program'),\n        getFieldObject('programStage'),\n        getFieldObject('programStatus', { option: true }),\n        getFieldObject('startDate'),\n        getFieldObject('value'),\n    ],\n    reportTable_chart_eventReport: [\n        getFieldObject('legendDisplayStrategy', { option: true }),\n        getFieldObject('legendSet', { option: true }),\n    ],\n    reportTable_eventReport_eventChart: [\n        getFieldObject('columnDimensions', { excluded: true }),\n        getFieldObject('rowDimensions', { excluded: true }),\n    ],\n    reportTable_chart_eventReport_eventChart: [\n        getFieldObject('access'),\n        getFieldObject('aggregationType', { option: true }),\n        getFieldObject('attributeDimensions', { excluded: true }),\n        getFieldObject('attributeValues', { excluded: true }),\n        getFieldObject('categoryDimensions', { excluded: true }),\n        getFieldObject('categoryOptionGroupSetDimensions', { excluded: true }),\n        getFieldObject('code', { excluded: true }),\n        getFieldObject('columns'),\n        getFieldObject('completedOnly', { option: true }),\n        getFieldObject('created'),\n        getFieldObject('dataDimensionItems', { excluded: true }),\n        getFieldObject('dataElementDimensions', { excluded: true }),\n        getFieldObject('dataElementGroupSetDimensions', { excluded: true }),\n        getFieldObject('description'),\n        getFieldObject('digitGroupSeparator'),\n        getFieldObject('displayDescription'),\n        getFieldObject('displayName'),\n        getFieldObject('displayShortName'),\n        getFieldObject('externalAccess', { excluded: true }),\n        getFieldObject('favorite'),\n        getFieldObject('favorites'),\n        getFieldObject('filterDimensions', { excluded: true }),\n        getFieldObject('filters'),\n        getFieldObject('hideSubtitle', { option: true }),\n        getFieldObject('hideTitle', { option: true }),\n        getFieldObject('href', { excluded: true }),\n        getFieldObject('id'),\n        getFieldObject('interpretations'),\n        getFieldObject('itemOrganisationUnitGroups', { excluded: true }),\n        getFieldObject('lastUpdated'),\n        getFieldObject('lastUpdatedBy'),\n        getFieldObject('name'),\n        getFieldObject('organisationUnitGroupSetDimensions', {\n            excluded: true,\n        }),\n        getFieldObject('organisationUnitLevels', { excluded: true }),\n        getFieldObject('organisationUnits', { excluded: true }),\n        getFieldObject('parentGraphMap'),\n        getFieldObject('periods', { excluded: true }),\n        getFieldObject('programIndicatorDimensions', { excluded: true }),\n        getFieldObject('publicAccess'),\n        getFieldObject('relativePeriods', { excluded: true }),\n        getFieldObject('rows'),\n        getFieldObject('shortName'),\n        getFieldObject('sortOrder', { option: true }),\n        getFieldObject('subscribed'),\n        getFieldObject('subscribers'),\n        getFieldObject('subtitle', { option: true }),\n        getFieldObject('timeField'),\n        getFieldObject('title', { option: true }),\n        getFieldObject('topLimit', { option: true }),\n        getFieldObject('translations'),\n        getFieldObject('user'),\n        getFieldObject('userAccesses'),\n        getFieldObject('userGroupAccesses'),\n        getFieldObject('userOrganisationUnit', { excluded: true }),\n        getFieldObject('userOrganisationUnitChildren', { excluded: true }),\n        getFieldObject('userOrganisationUnitGrandChildren', { excluded: true }),\n    ],\n};\n\n// actions\n\nexport const extractName = propObj => propObj[BASE_FIELD_NAME];\n\nexport const markExcluded = fieldObj =>\n    fieldObj.excluded === true\n        ? { ...fieldObj, [BASE_FIELD_NAME]: `!${fieldObj[BASE_FIELD_NAME]}` }\n        : fieldObj;\n\nexport const moveExcludedToEnd = (acc, current, curIndex, array) => {\n    !acc && (acc = array.slice());\n    current.charAt(0) === '!' && acc.push(acc.shift());\n    return acc;\n};\n\n// getters\n\nexport const getAllFieldObjectsByType = type =>\n    Object.entries(fieldsByType).reduce(\n        (fields, [key, value]) =>\n            key.includes(type) ? fields.concat(value) : fields,\n        []\n    );\n","// constants\n\nconst ID = 'id';\nconst NAME = 'name,displayName,displayShortName';\n\nconst DIMENSION_ITEM = `dimensionItem~rename(${ID})`;\nconst LEGEND_SET = `legendSet[${ID},${NAME}]`;\nconst USER = `user[${NAME},userCredentials[username]]`;\n\nconst ITEMS = `items[${DIMENSION_ITEM},${NAME},dimensionItemType]`;\nconst COMMENTS = `comments[${ID},${USER},lastUpdated,text`;\n\nconst AXIS = `dimension,filter,${LEGEND_SET},${ITEMS}`;\nconst INTERPRETATIONS = 'id,created';\n\n// nested fields map\nexport const nestedFields = {\n    columns: AXIS,\n    rows: AXIS,\n    filters: AXIS,\n    user: USER,\n    comments: COMMENTS,\n    interpretations: INTERPRETATIONS,\n};\n\nexport const extendFields = field =>\n    `${field}${nestedFields[field] ? `[${nestedFields[field]}]` : ''}`;\n","import {\n    getAllFieldObjectsByType,\n    extractName,\n    markExcluded,\n    moveExcludedToEnd,\n} from './baseFields';\nimport { extendFields } from './nestedFields';\n\nexport { getAllFieldObjectsByType };\n\nexport const getOptionsByType = type =>\n    getAllFieldObjectsByType(type).filter(fieldObj => fieldObj.option === true);\n\nexport const getIncludedByType = type =>\n    getAllFieldObjectsByType(type).filter(fieldObj => !fieldObj.excluded);\n\nexport const getExcludedByType = type =>\n    getAllFieldObjectsByType(type).filter(\n        fieldObj => fieldObj.excluded === true\n    );\n\nexport const getFieldsStringByType = type =>\n    getAllFieldObjectsByType(type)\n        .map(markExcluded)\n        .map(extractName)\n        .sort()\n        .reduce(moveExcludedToEnd, null)\n        .map(extendFields)\n        .join(',');\n","import { getFieldsStringByType } from '../modules/fields';\n\nexport const apiFetchVisualization = (d2, type, id) =>\n    d2.models[type].get(id, {\n        fields: getFieldsStringByType(type),\n    });\n","const peId = 'pe';\n\nexport const apiFetchAnalytics = async (d2, current, options) => {\n    const req = new d2.analytics.request()\n        .fromModel(current)\n        .withParameters(options);\n\n    const rawResponse = await d2.analytics.aggregate.get(req);\n\n    return [new d2.analytics.response(rawResponse)];\n};\n\nexport const apiFetchAnalyticsForYearOverYear = async (\n    d2,\n    current,\n    options\n) => {\n    let yearlySeriesReq = new d2.analytics.request()\n        .addPeriodDimension(current.yearlySeries)\n        .withSkipData(true)\n        .withSkipMeta(false)\n        .withIncludeMetadataDetails(true);\n\n    if (options.relativePeriodDate) {\n        yearlySeriesReq = yearlySeriesReq.withRelativePeriodDate(\n            options.relativePeriodDate\n        );\n    }\n\n    const yearlySeriesRes = await d2.analytics.aggregate.fetch(yearlySeriesReq);\n\n    const requests = [];\n    const yearlySeriesLabels = [];\n\n    const now = new Date();\n    const currentDay = ('' + now.getDate()).padStart(2, 0);\n    const currentMonth = ('' + (now.getMonth() + 1)).padStart(2, 0);\n\n    yearlySeriesRes.metaData.dimensions[peId].forEach(period => {\n        yearlySeriesLabels.push(yearlySeriesRes.metaData.items[period].name);\n\n        const startDate = `${period}-${currentMonth}-${currentDay}`;\n\n        const req = new d2.analytics.request()\n            .fromModel(current)\n            .withParameters(options)\n            .withRelativePeriodDate(startDate);\n\n        requests.push(d2.analytics.aggregate.get(req));\n    });\n\n    return Promise.all(requests).then(responses => ({\n        responses: responses.map(res => new d2.analytics.response(res)),\n        yearlySeriesLabels,\n    }));\n};\n","import pick from 'lodash-es/pick';\n\nexport const options = {\n    baseLineLabel: { defaultValue: undefined, requestable: false },\n    baseLineValue: { defaultValue: undefined, requestable: false },\n    // colorSet:\n    cumulativeValues: { defaultValue: false, requestable: false },\n    domainAxisLabel: { defaultValue: undefined, requestable: false },\n    hideEmptyRowItems: { defaultValue: 'NONE', requestable: false },\n    hideLegend: { defaultValue: false, requestable: false },\n    noSpaceBetweenColumns: { defaultValue: false, requestable: false },\n    percentStackedValues: { defaultValue: false, requestable: false },\n    rangeAxisDecimals: { defaultValue: undefined, requestable: false },\n    rangeAxisLabel: { defaultValue: undefined, requestable: false },\n    rangeAxisMaxValue: { defaultValue: undefined, requestable: false },\n    rangeAxisMinValue: { defaultValue: undefined, requestable: false },\n    rangeAxisSteps: { defaultValue: undefined, requestable: false },\n    regressionType: { defaultValue: 'NONE', requestable: false },\n    showData: { defaultValue: true, requestable: false },\n    targetLineLabel: { defaultValue: undefined, requestable: false },\n    targetLineValue: { defaultValue: undefined, requestable: false },\n    // legendDisplayStrategy\n    // legendSet\n    aggregationType: { defaultValue: 'DEFAULT', requestable: true },\n    completedOnly: { defaultValue: false, requestable: true },\n    hideSubtitle: { defaultValue: false, requestable: false },\n    hideTitle: { defaultValue: false, requestable: false },\n    sortOrder: { defaultValue: 0, requestable: false },\n    subtitle: { defaultValue: undefined, requestable: false },\n    title: { defaultValue: undefined, requestable: false },\n    // topLimit\n};\n\nexport const computedOptions = {\n    baseLine: { defaultValue: false, requestable: false },\n    targetLine: { defaultValue: false, requestable: false },\n};\n\nexport default options;\n\nexport const getOptionsForUi = () => {\n    return Object.entries({ ...options, ...computedOptions }).reduce(\n        (map, [option, props]) => {\n            map[option] = props.defaultValue;\n\n            return map;\n        },\n        {}\n    );\n};\n\nexport const getOptionsForRequest = () => {\n    return Object.entries(options).filter(\n        ([option, props]) => props.requestable\n    );\n};\n\nconst isNotDefault = (optionsFromVisualization, prop) => {\n    return Boolean(\n        optionsFromVisualization[prop] &&\n            optionsFromVisualization[prop] !== options[prop].defaultValue\n    );\n};\n\nexport const getOptionsFromVisualization = visualization => {\n    const optionsFromVisualization = {\n        ...getOptionsForUi(),\n        ...pick(visualization, Object.keys(options)),\n    };\n\n    optionsFromVisualization.baseLine =\n        isNotDefault(optionsFromVisualization, 'baseLineLabel') ||\n        isNotDefault(optionsFromVisualization, 'baseLineValue');\n\n    optionsFromVisualization.targetLine =\n        isNotDefault(optionsFromVisualization, 'targetLineLabel') ||\n        isNotDefault(optionsFromVisualization, 'targetLineValue');\n\n    return optionsFromVisualization;\n};\n","export const computeGenericPeriodNames = responses => {\n    const xAxisRes = responses.reduce((out, res) => {\n        if (out.metaData) {\n            if (\n                res.metaData.dimensions.pe.length >\n                out.metaData.dimensions.pe.length\n            ) {\n                out = res;\n            }\n        } else {\n            out = res;\n        }\n\n        return out;\n    }, {});\n\n    const metadata = xAxisRes.metaData;\n\n    return metadata.dimensions.pe.reduce((genericPeriodNames, periodId) => {\n        const name = metadata.items[periodId].name;\n\n        // until the day the backend will support this in the API:\n        // trim off the trailing year in the period name\n        // english names should all have the year at the end of the string\n        genericPeriodNames.push(name.replace(/\\s+\\d{4}$/, ''));\n\n        return genericPeriodNames;\n    }, []);\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = theme => ({\n    progress: {\n        margin: theme.spacing.unit * 2,\n        maxWidth: 200,\n        textAlign: 'center',\n        alignSelf: 'center',\n    },\n    outer: {\n        display: 'flex',\n        justifyContent: 'center',\n        height: '100%',\n    },\n});\n\nfunction CircularIndeterminate(props) {\n    const { classes } = props;\n    return (\n        <div className={classes.outer}>\n            <CircularProgress className={classes.progress} />\n        </div>\n    );\n}\n\nCircularIndeterminate.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(CircularIndeterminate);\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport isEqual from 'lodash-es/isEqual';\nimport i18n from '@dhis2/d2-i18n';\nimport {\n    isYearOverYear,\n    isSingleValue,\n    createVisualization,\n} from '@dhis2/analytics';\n\nimport { apiFetchVisualization } from './api/visualization';\nimport {\n    apiFetchAnalytics,\n    apiFetchAnalyticsForYearOverYear,\n} from './api/analytics';\nimport { getOptionsForRequest } from './modules/options';\nimport { computeGenericPeriodNames } from './modules/analytics';\nimport { BASE_FIELD_YEARLY_SERIES } from './modules/fields/baseFields';\nimport LoadingMask from './widgets/LoadingMask';\n\nclass ChartPlugin extends Component {\n    constructor(props) {\n        super(props);\n\n        this.canvasRef = React.createRef();\n\n        this.recreateVisualization = Function.prototype;\n\n        this.state = {\n            isLoading: true,\n        };\n    }\n\n    componentDidMount() {\n        this.renderChart();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!isEqual(this.props.config, prevProps.config)) {\n            this.renderChart();\n            return;\n        }\n\n        if (!isEqual(this.props.filters, prevProps.filters)) {\n            this.renderChart();\n            return;\n        }\n\n        // id set by DV app, style works in dashboards\n        if (\n            this.props.id !== prevProps.id ||\n            !isEqual(this.props.style, prevProps.style)\n        ) {\n            this.recreateVisualization(0); // disable animation\n            return;\n        }\n    }\n\n    getRequestOptions = (visualization, filters) => {\n        const options = getOptionsForRequest().reduce(\n            (map, [option, props]) => {\n                // only add parameter if value !== default\n                if (\n                    visualization[option] !== undefined &&\n                    visualization[option] !== props.defaultValue\n                ) {\n                    map[option] = visualization[option];\n                }\n\n                return map;\n            },\n            {}\n        );\n\n        // interpretation filter\n        if (filters.relativePeriodDate) {\n            options.relativePeriodDate = filters.relativePeriodDate;\n        }\n\n        // global filters\n        // userOrgUnit\n        if (filters.userOrgUnit && filters.userOrgUnit.length) {\n            const ouIds = filters.userOrgUnit.map(\n                ouPath => ouPath.split('/').slice(-1)[0]\n            );\n\n            options.userOrgUnit = ouIds.join(';');\n        }\n\n        return options;\n    };\n\n    getConfigById = id => {\n        return apiFetchVisualization(this.props.d2, 'chart', id);\n    };\n\n    renderChart = async () => {\n        const {\n            config,\n            filters,\n            forDashboard,\n            onResponsesReceived,\n            onChartGenerated,\n            onError,\n        } = this.props;\n\n        try {\n            const visualization =\n                Object.keys(config).length === 1 && config.id\n                    ? await this.getConfigById(config.id)\n                    : config;\n\n            const options = this.getRequestOptions(visualization, filters);\n\n            const extraOptions = {\n                dashboard: forDashboard,\n                noData: { text: i18n.t('No data') },\n            };\n\n            let responses = [];\n\n            if (isYearOverYear(visualization.type)) {\n                let yearlySeriesLabels = [];\n\n                ({\n                    responses,\n                    yearlySeriesLabels,\n                } = await apiFetchAnalyticsForYearOverYear(\n                    this.props.d2,\n                    visualization,\n                    options\n                ));\n\n                extraOptions[BASE_FIELD_YEARLY_SERIES] = yearlySeriesLabels;\n                extraOptions.xAxisLabels = computeGenericPeriodNames(responses);\n            } else {\n                responses = await apiFetchAnalytics(\n                    this.props.d2,\n                    visualization,\n                    options\n                );\n            }\n\n            if (responses.length) {\n                onResponsesReceived(responses);\n            }\n\n            this.recreateVisualization = animation => {\n                const visualizationConfig = createVisualization(\n                    responses,\n                    visualization,\n                    this.canvasRef.current,\n                    {\n                        ...extraOptions,\n                        animation,\n                    },\n                    undefined,\n                    undefined,\n                    isSingleValue(visualization.type) ? 'dhis' : 'highcharts' // output format\n                );\n\n                if (isSingleValue(visualization.type)) {\n                    onChartGenerated(visualizationConfig.visualization);\n                } else {\n                    onChartGenerated(\n                        visualizationConfig.visualization.getSVGForExport({\n                            sourceHeight: 768,\n                            sourceWidth: 1024,\n                        })\n                    );\n                }\n            };\n\n            this.recreateVisualization();\n\n            this.setState({ isLoading: false });\n        } catch (error) {\n            onError(error);\n        }\n    };\n\n    render() {\n        return (\n            <Fragment>\n                {this.state.isLoading ? <LoadingMask /> : null}\n                <div ref={this.canvasRef} style={this.props.style} />\n            </Fragment>\n        );\n    }\n}\n\nChartPlugin.defaultProps = {\n    config: {},\n    filters: {},\n    forDashboard: false,\n    style: {},\n    animation: 200,\n    onError: Function.prototype,\n    onChartGenerated: Function.prototype,\n    onResponsesReceived: Function.prototype,\n};\n\nChartPlugin.propTypes = {\n    id: PropTypes.number,\n    d2: PropTypes.object.isRequired,\n    animation: PropTypes.number,\n    config: PropTypes.object.isRequired,\n    filters: PropTypes.object,\n    forDashboard: PropTypes.bool,\n    style: PropTypes.object,\n    onError: PropTypes.func.isRequired,\n    onChartGenerated: PropTypes.func,\n    onResponsesReceived: PropTypes.func,\n};\n\nexport default ChartPlugin;\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport isEqual from 'lodash-es/isEqual'\nimport i18n from '@dhis2/d2-i18n'\nimport {\n    createVisualization,\n    isYearOverYear,\n    isSingleValue,\n} from '@dhis2/analytics'\n\nimport { apiFetchVisualization } from './api/visualization'\nimport {\n    apiFetchAnalytics,\n    apiFetchAnalyticsForYearOverYear,\n} from './api/analytics'\nimport { getOptionsForRequest } from './modules/options'\nimport { computeGenericPeriodNames } from './modules/analytics'\nimport { BASE_FIELD_YEARLY_SERIES } from './modules/fields/baseFields'\nimport LoadingMask from './widgets/LoadingMask'\n\nclass PivotPlugin extends Component {\n    constructor(props) {\n        super(props)\n\n        this.canvasRef = React.createRef()\n\n        this.recreateVisualization = Function.prototype\n\n        this.state = {\n            isLoading: true,\n        }\n    }\n\n    componentDidMount() {\n        this.renderChart()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!isEqual(this.props.config, prevProps.config)) {\n            this.renderChart()\n            return\n        }\n\n        if (!isEqual(this.props.filters, prevProps.filters)) {\n            this.renderChart()\n            return\n        }\n\n        // id set by DV app, style works in dashboards\n        if (\n            this.props.id !== prevProps.id ||\n            !isEqual(this.props.style, prevProps.style)\n        ) {\n            this.recreateVisualization(0) // disable animation\n            return\n        }\n    }\n\n    getRequestOptions = (visualization, filters) => {\n        const options = getOptionsForRequest().reduce(\n            (map, [option, props]) => {\n                // only add parameter if value !== default\n                if (\n                    visualization[option] !== undefined &&\n                    visualization[option] !== props.defaultValue\n                ) {\n                    map[option] = visualization[option]\n                }\n\n                return map\n            },\n            {}\n        )\n\n        // interpretation filter\n        if (filters.relativePeriodDate) {\n            options.relativePeriodDate = filters.relativePeriodDate\n        }\n\n        // global filters\n        // userOrgUnit\n        if (filters.userOrgUnit && filters.userOrgUnit.length) {\n            const ouIds = filters.userOrgUnit.map(\n                ouPath => ouPath.split('/').slice(-1)[0]\n            )\n\n            options.userOrgUnit = ouIds.join(';')\n        }\n\n        return options\n    }\n\n    getConfigById = id => {\n        return apiFetchVisualization(this.props.d2, 'chart', id)\n    }\n\n    renderChart = async () => {\n        const {\n            config,\n            filters,\n            forDashboard,\n            onResponsesReceived,\n            onChartGenerated,\n            onError,\n        } = this.props\n\n        try {\n            const visualization =\n                Object.keys(config).length === 1 && config.id\n                    ? await this.getConfigById(config.id)\n                    : config\n\n            const options = this.getRequestOptions(visualization, filters)\n\n            const extraOptions = {\n                dashboard: forDashboard,\n                noData: { text: i18n.t('No data') },\n            }\n\n            let responses = []\n\n            if (isYearOverYear(visualization.type)) {\n                let yearlySeriesLabels = []\n\n                ;({\n                    responses,\n                    yearlySeriesLabels,\n                } = await apiFetchAnalyticsForYearOverYear(\n                    this.props.d2,\n                    visualization,\n                    options\n                ))\n\n                extraOptions[BASE_FIELD_YEARLY_SERIES] = yearlySeriesLabels\n                extraOptions.xAxisLabels = computeGenericPeriodNames(responses)\n            } else {\n                responses = await apiFetchAnalytics(\n                    this.props.d2,\n                    visualization,\n                    options\n                )\n            }\n\n            if (responses.length) {\n                onResponsesReceived(responses)\n            }\n\n            this.recreateVisualization = animation => {\n                const visualizationConfig = createVisualization(\n                    responses,\n                    visualization,\n                    this.canvasRef.current,\n                    {\n                        ...extraOptions,\n                        animation,\n                    },\n                    undefined,\n                    undefined,\n                    isSingleValue(visualization.type) ? 'dhis' : 'highcharts' // output format\n                )\n\n                if (isSingleValue(visualization.type)) {\n                    onChartGenerated(visualizationConfig.visualization)\n                } else {\n                    onChartGenerated(\n                        visualizationConfig.visualization.getSVGForExport({\n                            sourceHeight: 768,\n                            sourceWidth: 1024,\n                        })\n                    )\n                }\n            }\n\n            this.recreateVisualization()\n\n            this.setState({ isLoading: false })\n        } catch (error) {\n            onError(error)\n        }\n    }\n\n    render() {\n        return (\n            <Fragment>\n                {this.state.isLoading ? <LoadingMask /> : null}\n                <div ref={this.canvasRef} style={this.props.style} />\n            </Fragment>\n        )\n    }\n}\n\nPivotPlugin.defaultProps = {\n    config: {},\n    filters: {},\n    forDashboard: false,\n    style: {},\n    animation: 200,\n    onError: Function.prototype,\n    onChartGenerated: Function.prototype,\n    onResponsesReceived: Function.prototype,\n}\n\nPivotPlugin.propTypes = {\n    config: PropTypes.object.isRequired,\n    d2: PropTypes.object.isRequired,\n    onError: PropTypes.func.isRequired,\n    animation: PropTypes.number,\n    filters: PropTypes.object,\n    forDashboard: PropTypes.bool,\n    id: PropTypes.number,\n    style: PropTypes.object,\n    onChartGenerated: PropTypes.func,\n    onResponsesReceived: PropTypes.func,\n}\n\nexport default PivotPlugin\n","import React from 'react'\nimport { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics'\n\nimport ChartPlugin from './ChartPlugin'\nimport PivotPlugin from './PivotPlugin'\n\nconst VisualizationPlugin = props => {\n    if (!props.config.type || props.config.type === VIS_TYPE_PIVOT_TABLE) {\n        return <PivotPlugin {...props} />\n    } else {\n        return <ChartPlugin {...props} />\n    }\n}\n\nexport default VisualizationPlugin\n"],"names":["BASE_FIELD_NAME","BASE_FIELD_TYPE","BASE_FIELD_YEARLY_SERIES","getFieldObject","name","props","fieldsByType","reportTable","option","chart","excluded","eventReport","reportTable_eventReport","chart_eventChart","eventReport_eventChart","reportTable_chart_eventReport","reportTable_eventReport_eventChart","reportTable_chart_eventReport_eventChart","extractName","propObj","markExcluded","fieldObj","moveExcludedToEnd","acc","current","curIndex","array","slice","charAt","push","shift","getAllFieldObjectsByType","type","Object","entries","reduce","fields","key","value","includes","concat","ID","NAME","DIMENSION_ITEM","LEGEND_SET","USER","ITEMS","COMMENTS","AXIS","INTERPRETATIONS","nestedFields","columns","rows","filters","user","comments","interpretations","extendFields","field","getFieldsStringByType","map","sort","join","apiFetchVisualization","d2","id","models","get","peId","apiFetchAnalytics","options","req","analytics","request","fromModel","withParameters","aggregate","rawResponse","response","apiFetchAnalyticsForYearOverYear","yearlySeriesReq","addPeriodDimension","yearlySeries","withSkipData","withSkipMeta","withIncludeMetadataDetails","relativePeriodDate","withRelativePeriodDate","fetch","yearlySeriesRes","requests","yearlySeriesLabels","now","Date","currentDay","getDate","padStart","currentMonth","getMonth","metaData","dimensions","forEach","period","items","startDate","Promise","all","then","responses","res","baseLineLabel","defaultValue","undefined","requestable","baseLineValue","cumulativeValues","domainAxisLabel","hideEmptyRowItems","hideLegend","noSpaceBetweenColumns","percentStackedValues","rangeAxisDecimals","rangeAxisLabel","rangeAxisMaxValue","rangeAxisMinValue","rangeAxisSteps","regressionType","showData","targetLineLabel","targetLineValue","aggregationType","completedOnly","hideSubtitle","hideTitle","sortOrder","subtitle","title","getOptionsForRequest","filter","computeGenericPeriodNames","xAxisRes","out","pe","length","metadata","genericPeriodNames","periodId","replace","styles","theme","progress","margin","spacing","unit","maxWidth","textAlign","alignSelf","outer","display","justifyContent","height","CircularIndeterminate","classes","propTypes","PropTypes","object","isRequired","withStyles","ChartPlugin","visualization","userOrgUnit","ouIds","ouPath","split","config","forDashboard","onResponsesReceived","onChartGenerated","onError","keys","getConfigById","getRequestOptions","extraOptions","dashboard","noData","text","i18n","t","isYearOverYear","xAxisLabels","recreateVisualization","animation","visualizationConfig","createVisualization","canvasRef","isSingleValue","getSVGForExport","sourceHeight","sourceWidth","setState","isLoading","React","createRef","Function","prototype","state","renderChart","prevProps","isEqual","style","Component","defaultProps","number","bool","func","PivotPlugin","VisualizationPlugin","VIS_TYPE_PIVOT_TABLE"],"mappings":"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"}